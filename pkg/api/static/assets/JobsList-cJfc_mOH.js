import{x as se,y as ae,s as D,a as i,r as u,k as ie,l as F,K as T,L as le,M as ce,N as de,c as ue,m as b,j as e,t as xe,v as y,w as he,C as pe,D as ve,T as g,H as z}from"./index-M-qmRif_.js";import{G as ge,d as me,a as fe,b as je,C as be,c as ye,e as Ce}from"./KeyboardArrowRight-a4zgRSVS.js";import{u as De,L as Pe}from"./Loading-mo5OX1Dh.js";import{a as ke,S as $e}from"./Stack-EMqLsWhL.js";import{T as _e,a as Re,b as Le,d as Ie,O as h,I as C}from"./Tooltip-7V7RkaYQ.js";function Fe(r){return ae("MuiLink",r)}const Te=se("MuiLink",["root","disabled","focusVisible","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","focusVisible","variantPlain","variantOutlined","variantSoft","variantSolid","underlineNone","underlineHover","underlineAlways","h1","h2","h3","h4","title-lg","title-md","title-sm","body-lg","body-md","body-sm","body-xs","startDecorator","endDecorator"]),W=Te,ze=["color","textColor","variant"],We=["children","disabled","onBlur","onFocus","level","overlay","underline","endDecorator","startDecorator","component","slots","slotProps"],Ee=r=>{const{level:t,color:s,variant:a,underline:n,focusVisible:l,disabled:c}=r,o={root:["root",s&&`color${y(s)}`,c&&"disabled",l&&"focusVisible",t,n&&`underline${y(n)}`,a&&`variant${y(a)}`],startDecorator:["startDecorator"],endDecorator:["endDecorator"]};return he(o,Fe,{})},Je=D("span",{name:"JoyLink",slot:"StartDecorator",overridesResolver:(r,t)=>t.startDecorator})(({ownerState:r})=>{var t;return i({display:"inline-flex",marginInlineEnd:"clamp(4px, var(--Link-gap, 0.375em), 0.75rem)"},typeof r.startDecorator!="string"&&(r.alignItems==="flex-start"||((t=r.sx)==null?void 0:t.alignItems)==="flex-start")&&{marginTop:"2px"})}),Se=D("span",{name:"JoyLink",slot:"endDecorator",overridesResolver:(r,t)=>t.endDecorator})(({ownerState:r})=>{var t;return i({display:"inline-flex",marginInlineStart:"clamp(4px, var(--Link-gap, 0.25em), 0.5rem)"},typeof r.startDecorator!="string"&&(r.alignItems==="flex-start"||((t=r.sx)==null?void 0:t.alignItems)==="flex-start")&&{marginTop:"2px"})}),Be=D("a",{name:"JoyLink",slot:"Root",overridesResolver:(r,t)=>t.root})(({theme:r,ownerState:t})=>{var s,a,n,l,c,o,d;return[i({"--Icon-fontSize":"1.25em","--Icon-color":"currentColor","--CircularProgress-size":"1.25em","--CircularProgress-thickness":"3px"},t.level&&t.level!=="inherit"&&r.typography[t.level],t.level==="inherit"&&{font:"inherit"},t.underline==="none"&&{textDecoration:"none"},t.underline==="hover"&&{textDecoration:"none","&:hover":{"@media (hover: hover)":{textDecorationLine:"underline"}}},t.underline==="always"&&{textDecoration:"underline"},t.startDecorator&&{verticalAlign:"bottom"},{textDecorationThickness:"max(0.08em, 1px)",textUnderlineOffset:"0.15em",display:"inline-flex",alignItems:"center",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:r.vars.radius.xs,padding:0,cursor:"pointer",textDecorationColor:`var(--variant-outlinedBorder, rgba(${(s=r.vars.palette[t.color])==null?void 0:s.mainChannel} / var(--Link-underlineOpacity, 0.72)))`},t.variant?i({paddingBlock:"min(0.1em, 4px)",paddingInline:"0.25em"},!t.nesting&&{marginInline:"-0.25em"}):{color:`var(--variant-plainColor, rgba(${(a=r.vars.palette[t.color])==null?void 0:a.mainChannel} / 1))`,[`&.${W.disabled}`]:{pointerEvents:"none",color:`var(--variant-plainDisabledColor, rgba(${(n=r.vars.palette[t.color])==null?void 0:n.mainChannel} / 0.6))`}},{userSelect:t.component==="button"?"none":void 0,MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"}},t.overlay?{position:"initial","&::after":{content:'""',display:"block",position:"absolute",top:0,left:0,bottom:0,right:0,borderRadius:"var(--unstable_actionRadius, inherit)",margin:"var(--unstable_actionMargin)"},[`${r.focus.selector}`]:{"&::after":r.focus.default}}:{position:"relative",[r.focus.selector]:r.focus.default}),t.variant&&i({},(l=r.variants[t.variant])==null?void 0:l[t.color],{"&:hover":{"@media (hover: hover)":(c=r.variants[`${t.variant}Hover`])==null?void 0:c[t.color]},"&:active":(o=r.variants[`${t.variant}Active`])==null?void 0:o[t.color],[`&.${W.disabled}`]:(d=r.variants[`${t.variant}Disabled`])==null?void 0:d[t.color]})]}),Ve=u.forwardRef(function(t,s){const a=ie({props:t,name:"JoyLink"}),{color:n="primary",textColor:l,variant:c}=a,o=F(a,ze),d=u.useContext(T),J=u.useContext(le),m=ce(i({},o,{color:l})),{children:p,disabled:S=!1,onBlur:k,onFocus:$,level:B="body-md",overlay:V=!1,underline:M="hover",endDecorator:_,startDecorator:R,component:N,slots:A={},slotProps:q={}}=m,H=F(m,We),O=d||J?t.level||"inherit":B,{isFocusVisibleRef:L,onBlur:U,onFocus:w,ref:K}=de(),[G,I]=u.useState(!1),Q=ue(s,K),X=x=>{U(x),L.current===!1&&I(!1),k&&k(x)},Y=x=>{w(x),L.current===!0&&I(!0),$&&$(x)},v=i({},m,{color:n,disabled:S,focusVisible:G,underline:M,variant:c,level:O,overlay:V,nesting:d}),f=Ee(v),j=i({},H,{component:N,slots:A,slotProps:q}),[Z,ee]=b("root",{additionalProps:{onBlur:X,onFocus:Y},ref:Q,className:f.root,elementType:Be,externalForwardedProps:j,ownerState:v}),[re,te]=b("startDecorator",{className:f.startDecorator,elementType:Je,externalForwardedProps:j,ownerState:v}),[oe,ne]=b("endDecorator",{className:f.endDecorator,elementType:Se,externalForwardedProps:j,ownerState:v});return e.jsx(T.Provider,{value:!0,children:e.jsxs(Z,i({},ee,{children:[R&&e.jsx(re,i({},te,{children:R})),xe(p,["Skeleton"])?u.cloneElement(p,{variant:p.props.variant||"inline"}):p,_&&e.jsx(oe,i({},ne,{children:_}))]}))})}),Me=Ve,Ne="[listJobsQueryKey]",Ae=(r,t)=>{const s=r||10,a=t||0;return De({queryKey:[Ne,s,a],queryFn:()=>fetch(`http://localhost:8080/v1/jobs?limit=${s}&offset=${a}`).then(n=>n.json())})};var P={},qe=ve;Object.defineProperty(P,"__esModule",{value:!0});var E=P.default=void 0,He=qe(pe()),Oe=e,Ue=(0,He.default)((0,Oe.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),"Search");E=P.default=Ue;const we={ok:e.jsx(ye,{}),error:e.jsx(Ce,{})},Ke={ok:"success",error:"danger"},Ge=({lastStatus:r})=>e.jsx(e.Fragment,{children:e.jsx(be,{variant:"soft",size:"lg",startDecorator:we[r],children:e.jsx(g,{color:Ke[r],children:r})})}),Qe=({id:r,name:t,endpoint:s,method:a,expression:n,lastExecution:l,lastStatus:c,createdAt:o})=>e.jsxs("tr",{style:{width:"100%"},children:[e.jsx("td",{children:r}),e.jsx("td",{children:t}),e.jsx("td",{children:e.jsx(_e,{title:s,variant:"outlined",children:e.jsxs("span",{children:[s.substring(0,20),"..."]})})}),e.jsx("td",{children:a}),e.jsx("td",{children:n}),e.jsx("td",{children:new Date(l).toLocaleString()}),e.jsx("td",{children:e.jsx(Ge,{lastStatus:c})}),e.jsx("td",{children:new Date(o).toLocaleString()}),e.jsx("td",{children:e.jsx(Me,{href:`#/jobs/${r}`,children:e.jsx(E,{})})})]}),Xe=()=>e.jsxs("tr",{children:[e.jsx("th",{style:{width:80,minWidth:80,padding:"12px 6px"},children:"Job Id"}),e.jsx("th",{style:{minWidth:180,padding:"12px 6px"},children:"Name"}),e.jsx("th",{style:{minWidth:180,padding:"12px 6px"},children:"Endpoint"}),e.jsx("th",{style:{width:80,minWidth:80,padding:"12px 6px"},children:"Method"}),e.jsx("th",{style:{minWidth:140,padding:"12px 6px"},children:"CronExpression"}),e.jsx("th",{style:{minWidth:140,padding:"12px 6px"},children:"Last Execution"}),e.jsx("th",{style:{minWidth:140,padding:"12px 6px"},children:"Last Status"}),e.jsx("th",{style:{minWidth:140,padding:"12px 6px"},children:"Created At"}),e.jsx("th",{style:{minWidth:140,padding:"12px 6px"}})]}),Ye=r=>e.jsx("tfoot",{children:e.jsx("tr",{children:e.jsx("td",{colSpan:8,children:e.jsxs(z,{sx:{display:"flex",alignItems:"center",gap:2,justifyContent:"flex-end"},children:[e.jsxs(Re,{orientation:"horizontal",size:"sm",children:[e.jsx(Le,{children:"Rows per page:"}),e.jsxs(Ie,{onChange:r.handleChangeRowsPerPage,value:r.rowsPerPage,children:[e.jsx(h,{value:5,children:"5"}),e.jsx(h,{value:10,children:"10"}),e.jsx(h,{value:25,children:"25"}),e.jsx(h,{value:50,children:"50"}),e.jsx(h,{value:100,children:"100"})]})]}),e.jsxs(g,{textAlign:"center",sx:{minWidth:80},children:[r.page*r.rowsPerPage+1," to"," ",Math.min(r.page*r.rowsPerPage+r.rowsPerPage,r.totalRows)," of ",r.totalRows]}),e.jsxs(z,{sx:{display:"flex",gap:1},children:[e.jsx(C,{size:"sm",color:"neutral",variant:"outlined",disabled:r.page===0,onClick:()=>r.handleChangePage(0),sx:{bgcolor:"background.surface"},children:e.jsx(me,{})}),e.jsx(C,{size:"sm",color:"neutral",variant:"outlined",disabled:r.page===0,onClick:()=>r.handleChangePage(r.page-1),sx:{bgcolor:"background.surface"},children:e.jsx(fe,{})}),e.jsx(C,{size:"sm",color:"neutral",variant:"outlined",disabled:r.totalRows!==-1?r.totalRows<=(r.page+1)*r.rowsPerPage:!1,onClick:()=>r.handleChangePage(r.page+1),sx:{bgcolor:"background.surface"},children:e.jsx(je,{})})]})]})})})}),nr=()=>{const[r,t]=u.useState(10),[s,a]=u.useState(0),{data:n,error:l,isLoading:c}=Ae(r,s*r);return e.jsx(e.Fragment,{children:e.jsxs(ke,{spacing:4,children:[e.jsx(g,{style:{marginBottom:"1rem"},level:"h1",children:"Registered Jobs"}),!!l&&e.jsx($e,{style:{minWidth:"20rem",minHeight:"20rem",display:"flex",alignItems:"center",justifyContent:"center"},color:"danger",variant:"soft",children:e.jsx(g,{color:"danger",level:"body-lg",children:"Couldn't query Jobs"})}),c&&e.jsx(Pe,{}),n&&e.jsx(ge,{title:"Registered Jobs",Headers:Xe,Rows:(n==null?void 0:n.jobs.map((o,d)=>e.jsx(Qe,{id:o.id,name:o.name,endpoint:o.endpoint,method:o.httpmethod,expression:o.cronexp,lastExecution:o.lastExecution,lastStatus:o.succeeded,createdAt:o.createdAt},d)))||[],Foot:e.jsx(Ye,{page:s,rowsPerPage:r,handleChangePage:o=>{a(o)},handleChangeRowsPerPage:(o,d)=>{t(parseInt(d.toString(),10))},totalRows:n.claimedJobs})})]})})};export{nr as default};
