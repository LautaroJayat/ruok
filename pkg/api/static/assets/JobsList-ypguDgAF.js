import{x as se,y as ae,s as P,a as l,r as u,k as ie,l as T,K as z,L as le,M as ce,N as de,c as ue,m as y,j as e,t as xe,v as C,w as he,C as pe,D as ge,T as m,H as E}from"./index-0ZoIXrPW.js";import{G as ve,d as me,a as fe,b as je,C as be,c as ye,e as Ce}from"./KeyboardArrowRight-IUkOQmhS.js";import{u as De,L as Pe}from"./Loading-w2nNDiFA.js";import{a as ke,S as $e}from"./Stack-TLw0RgxU.js";import{T as _e,a as Re,b as Le,d as Ie,O as p,I as D}from"./Tooltip-I0to31hg.js";function Fe(t){return ae("MuiLink",t)}const Te=se("MuiLink",["root","disabled","focusVisible","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","focusVisible","variantPlain","variantOutlined","variantSoft","variantSolid","underlineNone","underlineHover","underlineAlways","h1","h2","h3","h4","title-lg","title-md","title-sm","body-lg","body-md","body-sm","body-xs","startDecorator","endDecorator"]),S=Te,ze=["color","textColor","variant"],Ee=["children","disabled","onBlur","onFocus","level","overlay","underline","endDecorator","startDecorator","component","slots","slotProps"],Se=t=>{const{level:r,color:s,variant:a,underline:n,focusVisible:c,disabled:d}=t,o={root:["root",s&&`color${C(s)}`,d&&"disabled",c&&"focusVisible",r,n&&`underline${C(n)}`,a&&`variant${C(a)}`],startDecorator:["startDecorator"],endDecorator:["endDecorator"]};return he(o,Fe,{})},Je=P("span",{name:"JoyLink",slot:"StartDecorator",overridesResolver:(t,r)=>r.startDecorator})(({ownerState:t})=>{var r;return l({display:"inline-flex",marginInlineEnd:"clamp(4px, var(--Link-gap, 0.375em), 0.75rem)"},typeof t.startDecorator!="string"&&(t.alignItems==="flex-start"||((r=t.sx)==null?void 0:r.alignItems)==="flex-start")&&{marginTop:"2px"})}),we=P("span",{name:"JoyLink",slot:"endDecorator",overridesResolver:(t,r)=>r.endDecorator})(({ownerState:t})=>{var r;return l({display:"inline-flex",marginInlineStart:"clamp(4px, var(--Link-gap, 0.25em), 0.5rem)"},typeof t.startDecorator!="string"&&(t.alignItems==="flex-start"||((r=t.sx)==null?void 0:r.alignItems)==="flex-start")&&{marginTop:"2px"})}),Be=P("a",{name:"JoyLink",slot:"Root",overridesResolver:(t,r)=>r.root})(({theme:t,ownerState:r})=>{var s,a,n,c,d,o,i;return[l({"--Icon-fontSize":"1.25em","--Icon-color":"currentColor","--CircularProgress-size":"1.25em","--CircularProgress-thickness":"3px"},r.level&&r.level!=="inherit"&&t.typography[r.level],r.level==="inherit"&&{font:"inherit"},r.underline==="none"&&{textDecoration:"none"},r.underline==="hover"&&{textDecoration:"none","&:hover":{"@media (hover: hover)":{textDecorationLine:"underline"}}},r.underline==="always"&&{textDecoration:"underline"},r.startDecorator&&{verticalAlign:"bottom"},{textDecorationThickness:"max(0.08em, 1px)",textUnderlineOffset:"0.15em",display:"inline-flex",alignItems:"center",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:t.vars.radius.xs,padding:0,cursor:"pointer",textDecorationColor:`var(--variant-outlinedBorder, rgba(${(s=t.vars.palette[r.color])==null?void 0:s.mainChannel} / var(--Link-underlineOpacity, 0.72)))`},r.variant?l({paddingBlock:"min(0.1em, 4px)",paddingInline:"0.25em"},!r.nesting&&{marginInline:"-0.25em"}):{color:`var(--variant-plainColor, rgba(${(a=t.vars.palette[r.color])==null?void 0:a.mainChannel} / 1))`,[`&.${S.disabled}`]:{pointerEvents:"none",color:`var(--variant-plainDisabledColor, rgba(${(n=t.vars.palette[r.color])==null?void 0:n.mainChannel} / 0.6))`}},{userSelect:r.component==="button"?"none":void 0,MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"}},r.overlay?{position:"initial","&::after":{content:'""',display:"block",position:"absolute",top:0,left:0,bottom:0,right:0,borderRadius:"var(--unstable_actionRadius, inherit)",margin:"var(--unstable_actionMargin)"},[`${t.focus.selector}`]:{"&::after":t.focus.default}}:{position:"relative",[t.focus.selector]:t.focus.default}),r.variant&&l({},(c=t.variants[r.variant])==null?void 0:c[r.color],{"&:hover":{"@media (hover: hover)":(d=t.variants[`${r.variant}Hover`])==null?void 0:d[r.color]},"&:active":(o=t.variants[`${r.variant}Active`])==null?void 0:o[r.color],[`&.${S.disabled}`]:(i=t.variants[`${r.variant}Disabled`])==null?void 0:i[r.color]})]}),Ve=u.forwardRef(function(r,s){const a=ie({props:r,name:"JoyLink"}),{color:n="primary",textColor:c,variant:d}=a,o=T(a,ze),i=u.useContext(z),f=u.useContext(le),x=ce(l({},o,{color:c})),{children:g,disabled:w=!1,onBlur:$,onFocus:_,level:B="body-md",overlay:V=!1,underline:M="hover",endDecorator:R,startDecorator:L,component:N,slots:A={},slotProps:W={}}=x,q=T(x,Ee),H=i||f?r.level||"inherit":B,{isFocusVisibleRef:I,onBlur:O,onFocus:U,ref:K}=de(),[G,F]=u.useState(!1),Q=ue(s,K),X=h=>{O(h),I.current===!1&&F(!1),$&&$(h)},Y=h=>{U(h),I.current===!0&&F(!0),_&&_(h)},v=l({},x,{color:n,disabled:w,focusVisible:G,underline:M,variant:d,level:H,overlay:V,nesting:i}),j=Se(v),b=l({},q,{component:N,slots:A,slotProps:W}),[Z,ee]=y("root",{additionalProps:{onBlur:X,onFocus:Y},ref:Q,className:j.root,elementType:Be,externalForwardedProps:b,ownerState:v}),[te,re]=y("startDecorator",{className:j.startDecorator,elementType:Je,externalForwardedProps:b,ownerState:v}),[oe,ne]=y("endDecorator",{className:j.endDecorator,elementType:we,externalForwardedProps:b,ownerState:v});return e.jsx(z.Provider,{value:!0,children:e.jsxs(Z,l({},ee,{children:[L&&e.jsx(te,l({},re,{children:L})),xe(g,["Skeleton"])?u.cloneElement(g,{variant:g.props.variant||"inline"}):g,R&&e.jsx(oe,l({},ne,{children:R}))]}))})}),Me=Ve,Ne="[listJobsQueryKey]",Ae=(t,r)=>{const s=t||10,a=r||0;return De({queryKey:[Ne,s,a],queryFn:()=>fetch(`http://localhost:8080/v1/jobs?limit=${s}&offset=${a}`).then(n=>n.json())})};var k={},We=ge;Object.defineProperty(k,"__esModule",{value:!0});var J=k.default=void 0,qe=We(pe()),He=e,Oe=(0,qe.default)((0,He.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),"Search");J=k.default=Oe;const Ue={ok:e.jsx(ye,{}),error:e.jsx(Ce,{})},Ke={ok:"success",error:"danger"},Ge=({lastStatus:t})=>e.jsx(e.Fragment,{children:e.jsx(be,{variant:"soft",size:"lg",startDecorator:Ue[t],children:e.jsx(m,{color:Ke[t],children:t})})}),Qe=({id:t,name:r,endpoint:s,method:a,expression:n,lastExecution:c,lastStatus:d,createdAt:o})=>{const[i]=u.useState(s.split("/"));return e.jsxs("tr",{style:{width:"100%"},children:[e.jsx("td",{children:t}),e.jsx("td",{children:r}),e.jsx("td",{children:e.jsx(_e,{title:s,variant:"outlined",children:e.jsx("span",{children:i.map((f,x)=>e.jsxs(e.Fragment,{children:[e.jsx("wbr",{}),f,x!==i.length-1&&"/"]}))})})}),e.jsx("td",{children:a}),e.jsx("td",{children:n}),e.jsx("td",{children:new Date(c).toLocaleString()}),e.jsx("td",{children:e.jsx(Ge,{lastStatus:d})}),e.jsx("td",{children:new Date(o).toLocaleString()}),e.jsx("td",{children:e.jsx(Me,{href:`#/jobs/${t}`,children:e.jsx(J,{})})})]})},Xe=()=>e.jsxs("tr",{children:[e.jsx("th",{style:{width:80,minWidth:80,padding:"12px 6px"},children:"Job Id"}),e.jsx("th",{style:{width:80,padding:"12px 6px"},children:"Name"}),e.jsx("th",{style:{width:150,padding:"12px 6px"},children:"Endpoint"}),e.jsx("th",{style:{width:80,padding:"12px 6px"},children:"Method"}),e.jsx("th",{style:{width:100,padding:"12px 6px"},children:"CronExpression"}),e.jsx("th",{style:{width:140,padding:"12px 6px"},children:"Last Execution"}),e.jsx("th",{style:{width:80,padding:"12px 6px"},children:"Last Status"}),e.jsx("th",{style:{width:140,padding:"12px 6px"},children:"Created At"}),e.jsx("th",{style:{width:50,padding:"12px 6px"}})]}),Ye=t=>e.jsx("tfoot",{children:e.jsx("tr",{children:e.jsx("td",{colSpan:8,children:e.jsxs(E,{sx:{display:"flex",alignItems:"center",gap:2,justifyContent:"flex-end"},children:[e.jsxs(Re,{orientation:"horizontal",size:"sm",children:[e.jsx(Le,{children:"Rows per page:"}),e.jsxs(Ie,{onChange:t.handleChangeRowsPerPage,value:t.rowsPerPage,children:[e.jsx(p,{value:5,children:"5"}),e.jsx(p,{value:10,children:"10"}),e.jsx(p,{value:25,children:"25"}),e.jsx(p,{value:50,children:"50"}),e.jsx(p,{value:100,children:"100"})]})]}),e.jsxs(m,{textAlign:"center",sx:{minWidth:80},children:[t.page*t.rowsPerPage+1," to"," ",Math.min(t.page*t.rowsPerPage+t.rowsPerPage,t.totalRows)," of ",t.totalRows]}),e.jsxs(E,{sx:{display:"flex",gap:1},children:[e.jsx(D,{size:"sm",color:"neutral",variant:"outlined",disabled:t.page===0,onClick:()=>t.handleChangePage(0),sx:{bgcolor:"background.surface"},children:e.jsx(me,{})}),e.jsx(D,{size:"sm",color:"neutral",variant:"outlined",disabled:t.page===0,onClick:()=>t.handleChangePage(t.page-1),sx:{bgcolor:"background.surface"},children:e.jsx(fe,{})}),e.jsx(D,{size:"sm",color:"neutral",variant:"outlined",disabled:t.totalRows!==-1?t.totalRows<=(t.page+1)*t.rowsPerPage:!1,onClick:()=>t.handleChangePage(t.page+1),sx:{bgcolor:"background.surface"},children:e.jsx(je,{})})]})]})})})}),nt=()=>{const[t,r]=u.useState(10),[s,a]=u.useState(0),{data:n,error:c,isLoading:d}=Ae(t,s*t);return e.jsx(e.Fragment,{children:e.jsxs(ke,{spacing:4,children:[e.jsx(m,{style:{marginBottom:"1rem"},level:"h1",children:"Registered Jobs"}),!!c&&e.jsx($e,{style:{minWidth:"20rem",minHeight:"20rem",display:"flex",alignItems:"center",justifyContent:"center"},color:"danger",variant:"soft",children:e.jsx(m,{color:"danger",level:"body-lg",children:"Couldn't query Jobs"})}),d&&e.jsx(Pe,{}),n&&e.jsx(ve,{title:"Registered Jobs",Headers:Xe,Rows:(n==null?void 0:n.jobs.map((o,i)=>e.jsx(Qe,{id:o.id,name:o.name,endpoint:o.endpoint,method:o.httpmethod,expression:o.cronexp,lastExecution:o.lastExecution,lastStatus:o.succeeded,createdAt:o.createdAt},i)))||[],Foot:e.jsx(Ye,{page:s,rowsPerPage:t,handleChangePage:o=>{a(o)},handleChangeRowsPerPage:(o,i)=>{r(parseInt(i.toString(),10))},totalRows:n.claimedJobs})})]})})};export{nt as default};
