import{j as t,P as f,T as p,r as x}from"./index-5BO19vtU.js";import{C as g}from"./CardContent-dI_RzQWR.js";import{u as v,L as y}from"./Loading-cChAbuoJ.js";import{a as u,S as I}from"./Stack-aCdhZ58D.js";const n=({variant:e="outlined",title:s,description:o})=>t.jsx(f,{variant:e,children:t.jsxs(g,{children:[t.jsx(p,{level:"title-lg",children:s}),t.jsx(p,{level:"body-lg",children:o})]})}),S="[getInstanceInfo]",$=()=>v({queryKey:[S],cacheTime:0,queryFn:()=>fetch("http://localhost:8080/v1/instance").then(e=>e.json())}),m=1e6,c=60*m,r=60*c,b=({micro:e})=>{const[s,o]=x.useState("");return x.useEffect(()=>{let a=e,i=Math.floor(e/r),l=Math.floor((e-r*i)/c),h=Math.floor((e-(r*i+l*c))/m),d=`${i} h - ${l} m - ${h} s`;o(d);const j=setInterval(()=>{a+=m,i=Math.floor(a/r),l=Math.floor((a-r*i)/c),h=Math.floor((a-(r*i+l*c))/m),d=`${i} h - ${l} m - ${h} s`,o(d),console.log("tick",d)},1e3);return()=>clearInterval(j)},[]),t.jsx(n,{variant:"outlined",title:"Uptime",description:s})},L=()=>{const{data:e,error:s,isLoading:o}=$();return s?t.jsx("div",{children:"Request Failed"}):t.jsx(t.Fragment,{children:t.jsxs(u,{spacing:4,children:[t.jsx(p,{style:{marginBottom:"1rem"},level:"h1",children:"Instance Info"}),!!s&&t.jsx(I,{style:{minWidth:"20rem",minHeight:"20rem",display:"flex",alignItems:"center",justifyContent:"center"},color:"danger",variant:"soft",children:t.jsx(p,{color:"danger",level:"body-lg",children:"Couldn't query for instance info"})}),o&&t.jsx(y,{}),e&&t.jsxs(u,{direction:"row",spacing:2,justifyContent:"flex-start",alignItems:"stretch",children:[t.jsxs(u,{direction:"column",spacing:2,children:[t.jsx(n,{variant:"outlined",title:"Application Name",description:(e==null?void 0:e.appName)||"unknown"}),t.jsx(n,{variant:"outlined",title:"Database Connected",description:`${e==null?void 0:e.dbConnected}`}),t.jsx(n,{variant:"outlined",title:"Database URL",description:(e==null?void 0:e.dbURL)||"unknown"}),t.jsx(n,{variant:"outlined",title:"TLS Active",description:`${e==null?void 0:e.tlsActive}`}),t.jsx(n,{variant:"outlined",title:"TLS Version",description:(e==null?void 0:e.tlsVersion)||"unknown"})]}),t.jsxs(u,{direction:"column",spacing:2,children:[t.jsx(n,{variant:"outlined",title:"Started At",description:`${new Date((e==null?void 0:e.startedAtMicro)/1e3).toLocaleString()}`||"unknown"}),t.jsx(b,{micro:(e==null?void 0:e.upTimeMicro)||0}),t.jsx(n,{variant:"outlined",title:"Claimed Jobs",description:`${e==null?void 0:e.claimedJobs}`||"unknown"}),t.jsx(n,{variant:"outlined",title:"Max Jobs",description:`${e==null?void 0:e.maxJobs}`||"unknown"})]})]})]})})};export{L as default};
